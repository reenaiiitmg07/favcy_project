{"ast":null,"code":"import _toPath from 'lodash-es/toPath';\n\nfunction createDeleteInWithCleanUp(_ref) {\n  var deepEqual = _ref.deepEqual,\n      empty = _ref.empty,\n      getIn = _ref.getIn,\n      deleteIn = _ref.deleteIn,\n      setIn = _ref.setIn;\n\n  var deleteInWithCleanUp = function deleteInWithCleanUp(state, path) {\n    if (path[path.length - 1] === ']') {\n      // array path\n      var pathTokens = _toPath(path);\n\n      pathTokens.pop();\n      var parent = getIn(state, pathTokens.join('.'));\n      return parent ? setIn(state, path) : state;\n    }\n\n    var result = state;\n\n    if (getIn(state, path) !== undefined) {\n      result = deleteIn(state, path);\n    }\n\n    var dotIndex = path.lastIndexOf('.');\n\n    if (dotIndex > 0) {\n      var parentPath = path.substring(0, dotIndex);\n\n      if (parentPath[parentPath.length - 1] !== ']') {\n        var _parent = getIn(result, parentPath);\n\n        if (deepEqual(_parent, empty)) {\n          return deleteInWithCleanUp(result, parentPath);\n        }\n      }\n    }\n\n    return result;\n  };\n\n  return deleteInWithCleanUp;\n}\n\nexport default createDeleteInWithCleanUp;","map":null,"metadata":{},"sourceType":"module"}